<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Towards MagpieRSS 0.8: repeating elements, attributes, and Atom 1.0 | Kellan Elliott-McCrea: Blog</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Towards MagpieRSS 0.8: repeating elements, attributes, and Atom 1.0" />
<meta name="author" content="Kellan" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Now that we’ve got the security release out of the way, its time to move on top something a little more interesting. I finally got a chance to add a huge patch from RadGeek (of FeedWordPress fame) that adds:" />
<meta property="og:description" content="Now that we’ve got the security release out of the way, its time to move on top something a little more interesting. I finally got a chance to add a huge patch from RadGeek (of FeedWordPress fame) that adds:" />
<link rel="canonical" href="https://laughingmeme.org//2005/11/05/towards-magpierss-08-repeating-elements-attributes-and-atom-10/" />
<meta property="og:url" content="https://laughingmeme.org//2005/11/05/towards-magpierss-08-repeating-elements-attributes-and-atom-10/" />
<meta property="og:site_name" content="Kellan Elliott-McCrea: Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2005-11-05T19:54:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Towards MagpieRSS 0.8: repeating elements, attributes, and Atom 1.0" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Kellan"},"dateModified":"2005-11-05T19:54:00+00:00","datePublished":"2005-11-05T19:54:00+00:00","description":"Now that we’ve got the security release out of the way, its time to move on top something a little more interesting. I finally got a chance to add a huge patch from RadGeek (of FeedWordPress fame) that adds:","headline":"Towards MagpieRSS 0.8: repeating elements, attributes, and Atom 1.0","mainEntityOfPage":{"@type":"WebPage","@id":"https://laughingmeme.org//2005/11/05/towards-magpierss-08-repeating-elements-attributes-and-atom-10/"},"url":"https://laughingmeme.org//2005/11/05/towards-magpierss-08-repeating-elements-attributes-and-atom-10/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://laughingmeme.org//feed.xml" title="Kellan Elliott-McCrea: Blog" /><style>
    .post-date {
      float: right;
    }
  </style>
  <script defer data-domain="laughingmeme.org" src="https://plausible.io/js/script.js"></script>

</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Kellan Elliott-McCrea: Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="https://kellanem.com/notes/">Leadership notes</a><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Towards MagpieRSS 0.8:  repeating elements, attributes, and Atom 1.0</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2005-11-05T19:54:00+00:00" itemprop="datePublished">Nov 5, 2005
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Kellan</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Now that we’ve got the security release out of the way, its time to move on top something a little more interesting. I finally got a chance to add a <strong>huge</strong> patch from <a href="http://radgeek.org/">RadGeek</a> (of <a href="http://projects.radgeek.com/feedwordpress/">FeedWordPress</a> fame) that adds:</p>

<ul>
  <li>uniform access to attributes</li>
  <li>support for repeating elements</li>
  <li>Atom 1.0 support</li>
</ul>

<p>I’ve struggled for forever to figure out how to provide simple, uniform access to the increasingly rich data that people are syndicating (finally!). Eventually I gave up, and decided that the only solution was to rewrite the parser and make it simple to add per field custom logic. (kind of like the enclosure patch adds custom logic). I never got past the initial sketches.</p>

<p>So I’m <strong>thrilled</strong> that RadGeek has come up with a syntax (and code!) to extend rss_parser.inc to add support, while staying transparently backwards compatible. I’ve got out a <a href="http://laughingmeme.org/code/magpierss-200511060046.tar.gz">dev build</a> for people to play with, and written up some of the new features.</p>

<h3 id="access-repeating-elements">Access Repeating Elements</h3>

<p>Lets assume we have a basic RSS item, with several dc:subjects:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;item&gt;
&lt;title&gt;Some Exciting Title&lt;/title&gt;
&lt;dc:subject&gt;exciting&lt;/dc:subject&gt;
&lt;dc:subject&gt;example&lt;/dc:subject&gt;
&lt;dc:subject&gt;whoohoo&lt;/dc:subject&gt;
&lt;/item&gt;

echo $item['title'] 
=&gt; "Some Exciting Title"

echo $item['dc']['subject']
=&gt; "exciting"

</code></pre></div></div>

<p>So far, so normal. Now we get special.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>echo $item['dc']['subject#2']
=&gt; "example"

echo $item['dc']['subject#3']
=&gt; "whoohoo"

</code></pre></div></div>

<p>So how many dc:subjects do we have?</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>echo $item['dc']['subject#']
=&gt; 3

</code></pre></div></div>

<p>And this isn’t just for <code class="language-plaintext highlighter-rouge">dc:subject</code>, it works with whatever elements you like to repeat. (though we’ll need to decide what to do with the Atom link reltype munging hack, I’ll touch on that in a future post)</p>

<h3 id="access-attributes">Access Attributes</h3>

<p>Lets assume, we now have an Atom item with a category like:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;category term='atom' scheme='http://del.cio.us/tags' label='Atom' /&gt;

echo $item['category@term']
=&gt; "atom"

echo $item['category@scheme']
=&gt; "http://del.cio.us/tags"

echo $item['category@label']
=&gt; "Atom"

echo $item['category@']
=&gt; "term,scheme,label"   // that might want to change to an array

</code></pre></div></div>

<p>And if we had a second category for that item?</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;category term='calendar' /&gt;

echo $item['category#2@term']
=&gt; 'calendar'

</code></pre></div></div>

<p>or maybe an RSS 2.0 guid element</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;guid isPermaLink="true"&gt;http://inessential.com/2002/09/01.php#a2&lt;/guid&gt;

echo $item['guid']
=&gt; "http://inessential.com/2002/09/01.php#a2"

echo $item['guid@ispermalink']
=&gt; "true"

</code></pre></div></div>

<h3 id="where-from-here">Where from here</h3>

<p>So give the <a href="http://laughingmeme.org/code/magpierss-200511060046.tar.gz">dev build</a> a spin, kick the tires etc. This is the largest new feature in a while, and would be good to give it a workout. (ps. I’ve affair the normalization methods are throwing <code class="language-plaintext highlighter-rouge">notices</code> currently.)</p>

<p>Also any show stoppers people might see with this new syntax.</p>

<p>Once we’ve got this working smoothly, there are several other new features looking for inclusion in next release.</p>

<p>And finally I’m debating whether to break backward compatibility with how we currently do Atom link munging, in order to get more consistency with this new syntax, and I’d like to get some feedback on that.</p>

  </div><a class="u-url" href="/2005/11/05/towards-magpierss-08-repeating-elements-attributes-and-atom-10/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">


    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Kellan Elliott-McCrea</li><li><a class="u-email" href="mailto:kellan@gmail.com">kellan@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list">
  <li>On Mastodon: <a href="https://fiasco.social/@kellan">@kellan</a></li><li><a href="https://www.twitter.com/kellan"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">kellan</span></a></li><li><a href="https://www.flickr.com/photos/kellan"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#flickr"></use></svg> <span class="username">kellan</span></a></li><li><a href="https://github.com/kellan"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">kellan</span></a></li><li><a href="https://www.linkedin.com/in/kellanem"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg> <span class="username">kellanem</span></a></li><li><a href="https://kellanem.com/notes/">Leadership blog</a></li>
</ul>
</div>

      <div class="footer-col footer-col-3">
        <p>A personal blog of Kellan Elliott-McCrea. I don&#39;t really know what a &quot;laughing meme&quot; is. It sounded cool in 1999.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
