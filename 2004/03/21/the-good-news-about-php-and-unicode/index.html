<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>The Good News About PHP and Unicode | Kellan Elliott-McCrea: Blog</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="The Good News About PHP and Unicode" />
<meta name="author" content="Kellan" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Last October Joel Spolsky wrote an article in which, among other things, he lambasted PHP, and its (lack of) Unicode support. The article was widely read, and linked to. Scott Reyen wrote a reply demonstrating how one could write one’s own string handling methods that operated on the underlying integer representation of a Unicode string. This, more then Joel’s original article, convinced me (and a number of other people I’ve talked to) that PHP’s string handling was badly broken, and I wasn’t going near it. Scott’s article is academically interesting, but I’m sorry, you’ll have to shoot me before I go back to working with strings as arrays of integers." />
<meta property="og:description" content="Last October Joel Spolsky wrote an article in which, among other things, he lambasted PHP, and its (lack of) Unicode support. The article was widely read, and linked to. Scott Reyen wrote a reply demonstrating how one could write one’s own string handling methods that operated on the underlying integer representation of a Unicode string. This, more then Joel’s original article, convinced me (and a number of other people I’ve talked to) that PHP’s string handling was badly broken, and I wasn’t going near it. Scott’s article is academically interesting, but I’m sorry, you’ll have to shoot me before I go back to working with strings as arrays of integers." />
<link rel="canonical" href="https://laughingmeme.org//2004/03/21/the-good-news-about-php-and-unicode/" />
<meta property="og:url" content="https://laughingmeme.org//2004/03/21/the-good-news-about-php-and-unicode/" />
<meta property="og:site_name" content="Kellan Elliott-McCrea: Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2004-03-21T19:54:56+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="The Good News About PHP and Unicode" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Kellan"},"dateModified":"2004-03-21T19:54:56+00:00","datePublished":"2004-03-21T19:54:56+00:00","description":"Last October Joel Spolsky wrote an article in which, among other things, he lambasted PHP, and its (lack of) Unicode support. The article was widely read, and linked to. Scott Reyen wrote a reply demonstrating how one could write one’s own string handling methods that operated on the underlying integer representation of a Unicode string. This, more then Joel’s original article, convinced me (and a number of other people I’ve talked to) that PHP’s string handling was badly broken, and I wasn’t going near it. Scott’s article is academically interesting, but I’m sorry, you’ll have to shoot me before I go back to working with strings as arrays of integers.","headline":"The Good News About PHP and Unicode","mainEntityOfPage":{"@type":"WebPage","@id":"https://laughingmeme.org//2004/03/21/the-good-news-about-php-and-unicode/"},"url":"https://laughingmeme.org//2004/03/21/the-good-news-about-php-and-unicode/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://laughingmeme.org//feed.xml" title="Kellan Elliott-McCrea: Blog" /><style>
    .post-date {
      float: right;
    }
  </style>
  <script defer data-domain="laughingmeme.org" src="https://plausible.io/js/script.js"></script>

</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Kellan Elliott-McCrea: Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="https://kellanem.com/notes/">Leadership notes</a><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">The Good News About PHP and Unicode</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2004-03-21T19:54:56+00:00" itemprop="datePublished">Mar 21, 2004
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Kellan</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Last October <a href="http://www.joelonsoftware.com">Joel Spolsky</a> wrote an article in which, among other things, he <a href="http://www.joelonsoftware.com/articles/Unicode.html">lambasted PHP, and its (lack of) Unicode support</a>. The article was widely read, and linked to. Scott Reyen <a href="http://www.randomchaos.com/document.php?source=php_and_unicode">wrote a reply</a> demonstrating how one could write one’s own string handling methods that operated on the underlying integer representation of a Unicode string. This, more then Joel’s original article, convinced me (and a number of other people I’ve talked to) that PHP’s string handling was badly broken, and I wasn’t going near it. Scott’s article is academically interesting, but I’m sorry, you’ll have to shoot me before I go back to working with strings as arrays of integers.</p>

<h3 id="pleasantly-surprised">Pleasantly Surprised</h3>

<p>It’s on my todo list at work to start helping put together our internationalization strategy, so with a certain amount of trepidation I started experimenting. Hmmm, contrary to impression left by Joel’s article strings of multi-byte characters seem to be working, I can store them, print them, append them. I can create multi-byte variable names. So far, better then expected. Oops, strlen() is returning a false count, and we’ll take that to be indicative of a wider range of problem. Now what?</p>

<p>Out on the corners of my awareness I’ve known about the <a href="http://www.php.net/manual/en/ref.mbstring.php">multi-byte string extension</a> to PHP. It was something for handling Japanese characters, the documentation doesn’t read as quite fluent (which doesn’t make it all that different then a lot of documentation written by people I presume to be native english speakers), and besides it’s icky to have to prepend mb_ to all your function calls.</p>

<p>Turns out that mbstring besides adding native support for a number of CJKV encodings, also supports several of the Unicode encodings including the only one almost anyone really cares about, UTF-8. And you don’t have to use the mb_ functions, as you can tell mbstring to overload the native string, mail and regex handling functions transparently masking the originals with multi-byte aware ones.</p>

<p>Okay, that seems to all be working, I dug out one of my comment scripts, and punched in the phrase “An ḃfuil do ċroÃ­ ag bualaḋ Ã³ ḟaitÃ­os an ġrÃ¡ a ṁeall lena ṗÃ³g Ã©ada Ã³ ṡlÃ­ do leasa ṫÃº?” (escaped here, because this page is iso-8859-1, but trust me the original was utf-8). Oops, my MySQL isn’t properly supporting utf-8. I could probably tweak my tables with my current install to work, but MySQL 4.1.x looks like serious upgrade in internationalization over the 4.0.x series so that is my next project. I’ll probably upgrade my PHP5 to the newly released RC1 while I’m at it (as I’ve been testing all of this with my PHP4 build)</p>

<h3 id="tempest-teapot-am-i-missing-something">Tempest? Teapot? Am I missing Something?</h3>

<p>Being a mono-lingual American, with limited experience with internationalization I’m not sure where to go next to try to break this stuff? (probably the PCRE extension!) What exactly is it that PHP is lacking that makes it so impossible to build an i18n app that it deserved to be sentenced to 6 month peelings onions on submarine. (whether this is a punishment of course <a href="http://dev.r.tucows.com/blog/_archives/2003/10/16/4630.html">depends on your temperament</a>) Insights? Anyone?</p>

<p>Now just being able to display languages other then English is not the only thing one needs for successful internationalization; there are a slew of issues relating to formatting of dates, and numbers, etc, etc, etc. But its a nice place to start.</p>

  </div><a class="u-url" href="/2004/03/21/the-good-news-about-php-and-unicode/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">


    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Kellan Elliott-McCrea</li><li><a class="u-email" href="mailto:kellan@gmail.com">kellan@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list">
  <li>On Mastodon: <a href="https://fiasco.social/@kellan">@kellan</a></li><li><a href="https://www.twitter.com/kellan"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">kellan</span></a></li><li><a href="https://www.flickr.com/photos/kellan"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#flickr"></use></svg> <span class="username">kellan</span></a></li><li><a href="https://github.com/kellan"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">kellan</span></a></li><li><a href="https://www.linkedin.com/in/kellanem"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg> <span class="username">kellanem</span></a></li><li><a href="https://kellanem.com/notes/">Leadership blog</a></li>
</ul>
</div>

      <div class="footer-col footer-col-3">
        <p>A personal blog of Kellan Elliott-McCrea. I don&#39;t really know what a &quot;laughing meme&quot; is. It sounded cool in 1999.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
